# Railway Configuration - TOIT Enterprise Platform
# Configuração simplificada: apenas backend e frontend por ambiente

[build]
builder = "NIXPACKS"
buildCommand = "npm install && npm run build --filter=portal-toit"

[deploy]
startCommand = "npm run portal:dev"

# Environment Variables Template (sobrescrito pelo railway.json)
[env]
# Database
DATABASE_URL = "${DATABASE_URL}"
POSTGRES_URL = "${DATABASE_URL}"

# Redis
REDIS_URL = "${REDIS_URL}"
REDIS_PRIVATE_URL = "${REDIS_PRIVATE_URL}"

# JWT Secrets (definir no Railway Dashboard)
JWT_SECRET = "${JWT_SECRET}"
JWT_REFRESH_SECRET = "${JWT_REFRESH_SECRET}"

# Service URLs (auto-generated pelo Railway)
PORTAL_URL = "https://${RAILWAY_STATIC_URL}"
OMS_URL = "https://oms-blueworld-dev.up.railway.app"
TRADIA_URL = "https://tradia-dev.up.railway.app"

# CORS
CORS_ORIGIN = "${PORTAL_URL},${OMS_URL},${TRADIA_URL}"

# Email (configurar no dashboard)
SMTP_HOST = "${SMTP_HOST}"
SMTP_PORT = "${SMTP_PORT}"
SMTP_USER = "${SMTP_USER}"
SMTP_PASS = "${SMTP_PASS}"